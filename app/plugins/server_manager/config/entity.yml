# plugins/server_manager/config/entity.yml
entity:
  name: "Server Node"
  plural: "Servers"
  icon: "dns"
  description: "Verwaltet Lyndrix Nodes und deren physische/virtuelle CMDB-Beziehungen."

fields:
  # --- BASIC INFO ---
  - name: "name"
    label: "Server Name / Hostname"
    type: "string"
    show_in_table: true

  - name: "ipAddress"
    label: "Primary IP Address"
    type: "string"
    show_in_table: true

  - name: "node_type"
    label: "Node Type"
    type: "select"
    options: ["VM", "LXC", "HW"]
    default: "VM"
    show_in_table: true

  - name: "environment"
    label: "Environment"
    type: "select"
    options: ["PRODUCTION", "STAGING", "TESTING", "DEVELOPMENT"]
    default: "PRODUCTION"
    show_in_table: true

  - name: "status"
    label: "Lifecycle Status"
    type: "select"
    options:
      [
        "PLANNED",
        "PROVISIONING",
        "ONLINE",
        "MAINTENANCE",
        "OFFLINE",
        "DECOMMISSIONED",
      ]
    default: "PLANNED"
    show_in_table: true

  # --- HARDWARE & SPECS (Relationen zu anderen Objekten) ---
  - name: "vendor_id"
    label: "Hardware Vendor"
    type: "relation" # NEU: Das ist ein relationales Feld!
    target_entity: "vendors" # Verweist auf den Daten-Store der Vendoren (z.B. Dell, HP)
    show_in_table: true

  - name: "chassis_id"
    label: "Chassis / Model"
    type: "relation"
    target_entity: "chassis" # Verweist auf Hardware-Modelle (z.B. PowerEdge R740)
    show_in_table: false

  - name: "cpu_id"
    label: "CPU Typ"
    type: "relation"
    target_entity: "cpus" # Verweist auf die CPU-Datenbank
    show_in_table: false

  - name: "ram_gb"
    label: "Total RAM (GB)"
    type: "integer"
    default: 16
    show_in_table: true

  - name: "os_id"
    label: "Operating System"
    type: "relation"
    target_entity: "operating_systems" # z.B. Ubuntu 24.04, Windows Server 2022
    show_in_table: false

  # --- LOCATION & DATACENTER ---
  - name: "location_id"
    label: "Site / Standort"
    type: "relation"
    target_entity: "locations" # z.B. "Frankfurt HQ"
    show_in_table: false

  - name: "datacenter_id"
    label: "Datacenter"
    type: "relation"
    target_entity: "datacenters" # z.B. "FRA-01"
    show_in_table: true

  - name: "room_id"
    label: "Server Room"
    type: "relation"
    target_entity: "rooms"
    show_in_table: false

  - name: "rack_position"
    label: "Rack & U-Position"
    type: "string" # z.B. "Rack 42, U12-14"
    show_in_table: false

  # --- METADATA ---
  - name: "notes"
    label: "CMDB Notes"
    type: "textarea"
    show_in_table: false
